{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// handle fetch from pixabay\n//→ Fetch images (pixabay-api.js)\n//→ If error, hide loader + show iziToast\n//→ If no images, hide loader + show iziToast\n\nimport axios from 'axios';\n\nconst API_KEY = '42752010-70402d91d951665a6458bc92c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const getImagesByQuery = async query => {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n\n  return response.data;\n};\n","// render gallery\n//→ Show loader (render-functions.js)\n//→ Clear gallery (render-functions.js)\n//→ Render new gallery (render-functions.js)\n//→ Refresh SimpleLightbox (render-functions.js)\n//→ Hide loader (render-functions.js)\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nexport const clearGallery = () => {\n  galleryContainer.innerHTML = '';\n};\n\nexport const createGallery = images => {\n  const markup = images\n    .map(({ webformatURL, largeImageURL, tags }) => {\n      return `<li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\"\n              ><img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\"\n            />\n          </a>\n          </li>`;\n    })\n    .join('');\n\n  galleryContainer.innerHTML = markup;\n\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n};\n\nexport const showLoader = () => {\n  loader.classList.remove('hidden');\n};\n\nexport const hideLoader = () => {\n  loader.classList.add('hidden');\n};\n","// hendle form and call functions\n//→ Check input not empty (main.js)\n//→ If empty, show iziToast\n\n// get the search input, if empty notify - main js\n// fetch pics from api - api js\n// show/hide loader - render js\n// render pics in gallery - render js\n// hide loader after the result - render js\n// open lightbox when clicked on photo - render js\n// close lightbox - render js\n// clear gallery when new request sent - render js\n\n// functions:\n// getImagesByQuery(query) — in pixabay-api.js\n// createGallery(images) — in render-functions.js\n// clearGallery() — in render-functions.js\n// showLoader() — in render-functions.js\n// hideLoader() — in render-functions.js\n\nimport iziToast from 'izitoast';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-functions';\n\nconst form = document.querySelector('form');\nconst input = document.querySelector('input');\n\nconst handleSubmit = async event => {\n  event.preventDefault();\n\n  const query = input.value.trim();\n\n  if (query === '') {\n    iziToast.show({\n      title: 'Error',\n      message: \"Search field can't be empty!\",\n    });\n    return;\n  }\n\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query);\n    console.log(data);\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        title: 'Error',\n        message: 'Sorry, no images found!',\n      });\n    } else {\n      clearGallery();\n      createGallery(data.hits);\n    }\n  } catch (error) {\n    iziToast.show({\n      title: 'Error',\n      message: 'Oops, something went wrong. Try again later!',\n    });\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n};\n\nform.addEventListener('submit', handleSubmit);\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","axios","galleryContainer","loader","clearGallery","createGallery","images","markup","webformatURL","largeImageURL","tags","SimpleLightbox","showLoader","hideLoader","form","input","handleSubmit","event","iziToast","data","error"],"mappings":"+vBAOA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAmB,MAAMC,IACnB,MAAMC,EAAM,IAAIH,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACL,CAAG,GAEe,KCXZE,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAS,SAAS,cAAc,SAAS,EAElCC,EAAe,IAAM,CAChCF,EAAiB,UAAY,EAC/B,EAEaG,EAAgBC,GAAU,CACrC,MAAMC,EAASD,EACZ,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,CAAI,IAChC;AAAA,uBACUD,CAAa;AAAA,2BACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,gBAIhD,EACA,KAAK,EAAE,EAEVR,EAAiB,UAAYK,EAEZ,IAAII,EAAe,YAAY,EACvC,QAAO,CAClB,EAEaC,EAAa,IAAM,CAC9BT,EAAO,UAAU,OAAO,QAAQ,CAClC,EAEaU,EAAa,IAAM,CAC9BV,EAAO,UAAU,IAAI,QAAQ,CAC/B,ECZMW,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAQ,SAAS,cAAc,OAAO,EAEtCC,EAAe,MAAMC,GAAS,CAClCA,EAAM,eAAc,EAEpB,MAAMjB,EAAQe,EAAM,MAAM,KAAI,EAE9B,GAAIf,IAAU,GAAI,CAChBkB,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,8BACf,CAAK,EACD,MACD,CAEDN,IAEA,GAAI,CACF,MAAMO,EAAO,MAAMpB,EAAiBC,CAAK,EACzC,QAAQ,IAAImB,CAAI,EAEZA,EAAK,KAAK,SAAW,EACvBD,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,yBACjB,CAAO,GAEDd,IACAC,EAAcc,EAAK,IAAI,EAE1B,OAAQC,EAAO,CACdF,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,8CACf,CAAK,EACD,QAAQ,IAAIE,CAAK,CACrB,QAAY,CACRP,GACD,CACH,EAEAC,EAAK,iBAAiB,SAAUE,CAAY"}